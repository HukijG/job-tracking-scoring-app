<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Job Scoring Model - Feedback Tool</title>
    <link rel="stylesheet" href="css/styles.css">
</head>

<body>
    <div class="container">
        <!-- Header -->
        <div class="header">
            <div class="header-content">
                <h1>Job Scoring Model - Feedback Tool</h1>
                <p>Configure criteria, adjust weights, test rankings, and validate your scoring model</p>
            </div>
            <div class="header-actions">
                <button class="btn-icon" onclick="showHelp()" title="Help">❓</button>
            </div>
        </div>

        <!-- Tab Navigation -->
        <div class="tabs">
            <button class="tab-btn" data-tab="config">⚙️ Configuration</button>
            <button class="tab-btn active" data-tab="single">🧪 Single Test</button>
            <button class="tab-btn" data-tab="bulk">📊 Bulk Test</button>
            <button class="tab-btn" data-tab="report">📈 Validation</button>
        </div>

        <!-- Tab Contents -->
        <div class="content">
            <!-- Configuration Tab -->
            <div id="tab-config" class="tab-content">
                <div id="config-content">
                    <!-- Rendered by app.js -->
                </div>
            </div>

            <!-- Single Test Tab -->
            <div id="tab-single" class="tab-content active">
                <div id="single-test-content">
                    <!-- Rendered by app.js -->
                </div>
            </div>

            <!-- Bulk Test Tab -->
            <div id="tab-bulk" class="tab-content">
                <div id="bulk-test-content">
                    <!-- Rendered by app.js -->
                </div>
            </div>

            <!-- Validation Report Tab -->
            <div id="tab-report" class="tab-content">
                <div id="report-content">
                    <!-- Rendered by app.js -->
                </div>
            </div>
        </div>
    </div>

    <!-- Help Modal -->
    <div id="help-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Help & Instructions</h2>
                <button class="close-modal" onclick="closeHelp()">×</button>
            </div>

            <div style="font-size: 13px; line-height: 1.6;">
                <h3 style="font-size: 15px; margin-top: 15px; margin-bottom: 8px;">⚙️ Configuration</h3>
                <p>Define and customize your scoring criteria, rating scales, and rank thresholds.</p>
                <ul style="margin-left: 20px; margin-top: 5px;">
                    <li>Add/edit/delete criteria</li>
                    <li>Customize 1-5 rating descriptions</li>
                    <li>Adjust rank thresholds (A/B/C)</li>
                    <li>Export/import configurations</li>
                </ul>

                <h3 style="font-size: 15px; margin-top: 15px; margin-bottom: 8px;">🧪 Single Test</h3>
                <p>Test how a single job would be ranked using your current weights.</p>
                <ul style="margin-left: 20px; margin-top: 5px;">
                    <li>Adjust factor weights (must total 100%)</li>
                    <li>Score a job on each criterion (1-5)</li>
                    <li>See calculated rank and breakdown</li>
                </ul>

                <h3 style="font-size: 15px; margin-top: 15px; margin-bottom: 8px;">📊 Bulk Test</h3>
                <p>Upload multiple jobs to test in batch.</p>
                <ul style="margin-left: 20px; margin-top: 5px;">
                    <li>Upload CSV with job listings</li>
                    <li>Score each job on all criteria</li>
                    <li>Predict expected rank for each</li>
                    <li>Export scored jobs</li>
                </ul>

                <h3 style="font-size: 15px; margin-top: 15px; margin-bottom: 8px;">📈 Validation</h3>
                <p>Compare model rankings vs your expectations.</p>
                <ul style="margin-left: 20px; margin-top: 5px;">
                    <li>See match percentage</li>
                    <li>Review mismatched jobs</li>
                    <li>Export validation report</li>
                    <li>Tune weights based on results</li>
                </ul>

                <h3 style="font-size: 15px; margin-top: 15px; margin-bottom: 8px;">💾 Data Storage</h3>
                <p>All data is stored locally in your browser using localStorage. No data is sent to any server.</p>
            </div>

            <div style="margin-top: 20px; text-align: center;">
                <button class="btn-primary" onclick="closeHelp()">Got it!</button>
            </div>
        </div>
    </div>

    <!-- Load JavaScript Modules -->
    <script src="js/storage.js"></script>
    <script src="js/config-manager.js"></script>
    <script src="js/scoring-engine.js"></script>
    <script src="js/csv-parser.js"></script>
    <script src="js/bulk-test.js"></script>
    <script src="js/app.js"></script>

    <script>
        // Help modal functions
        function showHelp() {
            document.getElementById('help-modal').classList.add('active');
        }

        function closeHelp() {
            document.getElementById('help-modal').classList.remove('active');
        }

        // Close modal on background click
        document.getElementById('help-modal').addEventListener('click', (e) => {
            if (e.target.id === 'help-modal') {
                closeHelp();
            }
        });
    </script>
</body>

</html>
